From aa4d70d84f188b4fe2a79101a4524a21ed565f5f Mon Sep 17 00:00:00 2001
From: "hugh chao (hugh712)" <hugh.chao@canonical.com>
Date: Fri, 29 Nov 2019 13:07:15 +0800
Subject: [PATCH 1/2] Trigger active_input_update as a workaround in some cases
 which is reporting things in the wrong order.

https://gitlab.gnome.org/GNOME/gnome-control-center/issues/324
---
 panels/sound/gvc-mixer-dialog.c | 3 +++
 1 file changed, 3 insertions(+)

Index: gnome-control-center-3.28.2/panels/sound/gvc-mixer-dialog.c
===================================================================
--- gnome-control-center-3.28.2.orig/panels/sound/gvc-mixer-dialog.c
+++ gnome-control-center-3.28.2/panels/sound/gvc-mixer-dialog.c
@@ -1164,6 +1164,9 @@ add_input_ui_entry (GvcMixerDialog *dial
                             ICON_COLUMN, icon,
                             ID_COLUMN, gvc_mixer_ui_device_get_id (input),
                             -1);
+
+        if (gtk_tree_model_iter_n_children (model, NULL) == 1)
+                active_input_update (dialog, input);
 }
 
 static void
@@ -1297,6 +1300,9 @@ on_control_input_removed (GvcMixerContro
         if (found) {
                 gtk_list_store_remove (GTK_LIST_STORE (model), &iter);
         }
+
+        if (gtk_tree_model_iter_n_children (model, NULL) == 0)
+                gtk_widget_set_sensitive (dialog->input_bar, FALSE);
 }
 
 static void
